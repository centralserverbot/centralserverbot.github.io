<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="refresh" content="5;url=https://centralbot.xyz/dash/">
        <title>Redirecting...</title>
        <!-- Add this script tag in the head of your HTML file -->
       

    </head>

<body>

    <h1>Logging you in...</h1>

 <!-- Add this script tag in the head of your HTML file -->
<!-- Add this script tag in the head of your HTML file -->

<!-- Your main script -->
<script>
  // Check if jwt_decode is defined
 
    const getTokenFromUrl = () => {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('token');
    };

    const decode = token => decodeURIComponent(atob(token.split('.')[1].replace('-', '+').replace('_', '/')).split('').map(c => `%${('00' + c.charCodeAt(0).toString(16)).slice(-2)}`).join(''));


    const saveUserIdToLocalStorage = (token) => {
      try {
        // Decode the token
        const decodedToken = decode(token);

        alert(decodedToken)
        //{"userId":"648314224174432267","iat":1710335908}
        // Extract the user ID from the decoded token
        const userId = decodedToken.userId;
        let obj = {"userId":"648314224174432267","iat":1710335908}
        // Save the user ID to localStorage
        localStorage.setItem('userId', obj.userId);

        // Now, you can use the user ID from localStorage as needed
      } catch (error) {
        console.error('Error decoding JWT or saving user ID to localStorage:', error.message);
      }
    };

    

    // Get the token from the URL and decode/save the user ID to localStorage
    const token = getTokenFromUrl();
    if (token) {
      saveUserIdToLocalStorage(token);
    }

</script>







</body>


</html>
